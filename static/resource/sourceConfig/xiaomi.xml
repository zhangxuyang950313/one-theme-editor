<Configuration>

    <!-- 
        文件模板 
        type: 指定的编辑器，  info (工程信息编辑器)
    -->
    <FileTemplate output="./description.xml" type="info">
        <Template>
            <?xml version="1.0" encoding="utf-8"?>
            <MIUI-Theme>
                <title>${name}</title>
                <designer>${designer}</designer>
                <author>${author}</author>
                <version>${version}</version>
                <uiVersion>${uiVersion}</uiVersion>
            </MIUI-Theme>
        </Template>
        <Items>
            <Item name="name"       description="名称" type=""/>
            <Item name="designer"   description="设计师"/>
            <Item name="author"     description="制作者"/>
            <Item name="version"    description="版本号"/>
            <Item name="uiVersion"  description="UI版本" disabled="true" visible="true"/>
        </Items>
    </FileTemplate>

    <!-- 编辑器资源配置 -->
    <SourceConfig src="xiaomi/miui12/description.xml"/>

    <!-- 
        打包配置 
        format:         打包格式 zip | tar (默认 zip)
        extname:        打包后扩展名 (默认 zip)
        execute9patch:  处理.9信息 (默认 true)
    -->
    <PackConfig extname="mtz" execute9patch="true">
        <!-- 
            匹配不打包的规则 
            regex:      正则表达式
            pattern:    匹配模式（暂不支持)
        -->
        <Exclude regex="^\..+" pattern=".DS_Store"/>
        <!-- 
            type: dir | pack | file     打包文件类型标识，dir 目录，pack 压缩，file 文件
            pattern:                    匹配模式
        -->
        <Item type="dir"  pattern="boots/**"/>
        <Item type="pack" pattern="clock_2x4/**"/>
        <Item type="pack" pattern="com.*/**"/>
        <Item type="pack" pattern="framework.*/**"/>
        <Item type="pack" pattern="icons/**"/>
        <Item type="pack" pattern="lockscreen/**"/>
        <Item type="pack" pattern="miwallpaper/**"/>
        <Item type="dir"  pattern="wallpaper/**"/>
        <Item type="file" pattern="description.xml"/>
    </PackConfig>

    <!-- 应用配置 -->
    <ApplyConfig>
        <!-- 
            编辑器打包时包含环境变量：
            packaged:  本地打包后的文件路径(固定写法，用于编辑器指定)
        -->
        <Step 
            description="推送到手机..." 
            cmd="adb push ${packaged} /sdcard/mi-theme.mtz"
        />
        <Step 
            description="应用到主题..." 
            cmd="adb shell am start -n com.android.thememanager/com.android.thememanager.ApplyThemeForScreenshot -e theme_file_path /sdcard/mi-theme.mtz -e api_called_from OneThemeEditor"
        />
    </ApplyConfig>
</Configuration>